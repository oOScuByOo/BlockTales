<!--
/**********************************************************\
* [+] Fichier : game.html                                  *
* [+] Auteur : ooscubyoo                                   *
* [+] Twitter : @tomy_lee_m                                *
\**********************************************************/
-->

<head>
  <title>BlockTales</title>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
  <div id="gameDiv">
    <canvas id="game"></canvas>
    <div id="inventory"></div>
  </div>
</body>

<script src="js/image.js"></script>

<script src="map_array/mapHub.js"></script>
<script src="js/maps.js"></script>


<script src="js/entity.js"></script>
<script src="js/actor.js"></script>

<script src="js/inventory.js"></script>
<script src="js/items.js"></script>

<script src="js/player.js"></script>
<script src="js/enemy.js"></script>

<script src="js/bullet.js"></script>
<script src="js/upgrade.js"></script>

<script src="js/keyboard_command.js"></script>
<script src="js/mouse_command.js"></script>

<script src="js/collision.js"></script>

<script src="js/update.js"></script>
<script src="js/startnewgame.js"></script>

<script>

  var gameWindow = document.getElementById('game');
  var game = gameWindow.getContext("2d");

  var WIDTH = 640;
  var HEIGHT = 360;

  var GAMEWINDOW_WIDTH = 640;
  var GAMEWINDOW_HEIGHT = 360;

  var timeWhenGameStarted = Date.now();

  var frameCount = 0;

  var score = 0;

  var paused = false;

  var resizeCanvas = function() {
    GAMEWINDOW_WIDTH = document.body.offsetWidth;
    GAMEWINDOW_HEIGHT = document.body.offsetHeight;

    var screenRatio = 16 / 9;

    if(GAMEWINDOW_HEIGHT < GAMEWINDOW_WIDTH / screenRatio) {
      GAMEWINDOW_WIDTH = GAMEWINDOW_HEIGHT * screenRatio;
    }
    else {
      GAMEWINDOW_HEIGHT = GAMEWINDOW_WIDTH / screenRatio;
    }

    gameWindow.width = WIDTH;
    gameWindow.height = HEIGHT;
    game.font = '30px Arial';
    game.mozImageSmoothingEnabled = false;	// better graphics for pixel art
    game.msImageSmoothingEnabled = false;
    game.imageSmoothingEnabled = false;

    gameWindow.style.width = '' + GAMEWINDOW_WIDTH + 'px';
    gameWindow.style.height = '' + GAMEWINDOW_HEIGHT + 'px';
  }
  resizeCanvas();

  window.addEventListener('resize',function() {
    resizeCanvas();
  })

  startNewGame();

  setInterval(update,40);

</script>
